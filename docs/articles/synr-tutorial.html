<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>synr: Main tutorial • synr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="synr: Main tutorial">
<meta property="og:description" content="synr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">synr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dingemanse-data-example.html">Using synr with real data: Coloured vowels</a>
    </li>
    <li>
      <a href="../articles/quick-start.html">synr: Quick start</a>
    </li>
    <li>
      <a href="../articles/synr-creategroup.html">Creating ParticipantGroup objects</a>
    </li>
    <li>
      <a href="../articles/synr-tutorial.html">synr: Main tutorial</a>
    </li>
    <li>
      <a href="../articles/validate-data.html">Validating participant color response data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/datalowe/synr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="synr-tutorial_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>synr: Main tutorial</h1>
                        <h4 class="author">Lowe Wilsson</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/datalowe/synr/blob/master/vignettes/synr-tutorial.Rmd"><code>vignettes/synr-tutorial.Rmd</code></a></small>
      <div class="hidden name"><code>synr-tutorial.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<div id="synesthesia-and-consistency-testing" class="section level3">
<h3 class="hasAnchor">
<a href="#synesthesia-and-consistency-testing" class="anchor"></a>Synesthesia and consistency testing</h3>
<p>Within <a href="https://en.wikipedia.org/wiki/Synesthesia">synesthesia</a> research, specifically research about <a href="https://en.wikipedia.org/wiki/Grapheme%E2%80%93color_synesthesia">grapheme-color synesthesia</a>, <strong><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4118597/#S4title">consistency tests</a></strong> are often used. Basically, a participant is shown a set of <strong>graphemes</strong> (e. g. letters, digits, months, or other words) and has to respond by indicating what color, if any, they associate with the grapheme. Each grapheme is repeated a certain number of times, usually three times, throughout the test. If the participant is unusually consistent in the colors they respond with, e. g. choosing a red color every time an ‘A’ is shown and always choosing a green color for ‘H’, this indicates that the participant might have synesthetic grapheme-color associations. There might of course be other reasons for consistent response patterns, such as if the participant employed mnemonic strategies, for which reason consistency testing is often combided with other measures for synesthesia classification. Still, consistency testing is widely considered to be an important tool for synesthesia research.</p>
<p>In consistency testing, participants’ levels of consistency are estimated by using a score based on response colors’ color space distances. This has been called by different names, such as <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4118597/#S4title">‘color variation score’</a>. Within the synr package, the term <strong>‘consistency score’</strong> is used to refer to this score.</p>
</div>
<div id="synrs-purpose" class="section level3">
<h3 class="hasAnchor">
<a href="#synrs-purpose" class="anchor"></a>synr’s purpose</h3>
<p>The aim of this package is to facilitate analysis of consistency test data by providing functionality for rolling all the consistency test data up into one specialized R object. This object, with its linked methods (functions), constitutes an effective interface for:</p>
<ul>
<li>Quick access/lookup of individual participants’ data.</li>
<li>Calculation of consistency scores.
<ul>
<li>Since different researchers have used different <a href="https://en.wikipedia.org/wiki/Color_space">color spaces</a> to calculate consistency scores, methods include options for specifying some (but not all) different color spaces.</li>
<li>Similarly, different algorithms (e. g. <a href="https://en.wikipedia.org/wiki/Taxicab_geometry">manhattan distance</a> or <a href="https://en.wikipedia.org/wiki/Euclidean_distance">Euclidean distance</a> have been utilized to calculate color space distances. synr allows for choosing between some options here also, through specifications in method calls.</li>
</ul>
</li>
<li>Validating participant data using so-called <a href="https://en.wikipedia.org/wiki/Cluster_analysis">clustering</a>.
<ul>
<li>This identifies participants who have too few responses or have used too few colors, e. g. only black and white, for their data to be reliable for estimating the degree of synesthetic associations.</li>
</ul>
</li>
<li>Filtering the data in order to calculate the above statistics only for a subset of graphemes.
<ul>
<li>This helps when trying to identify e. g. participants who have synesthesia for digits, but not other graphemes.</li>
</ul>
</li>
<li>Simple plotting of individual participants’ data.
<ul>
<li>This is useful for quick visual inspection of participant responses. This might aid in double checking procedures for identifying synesthetes or classifying participant data as valid/invalid.</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<div id="rolling-up-the-data" class="section level3">
<h3 class="hasAnchor">
<a href="#rolling-up-the-data" class="anchor"></a>Rolling up the data</h3>
<p>When using synr, your main interface to the data is the ParticipantGroup class. For information on how to convert raw consistency test data into a ParticipantGroup object, please see the separate tutorial <a href="synr-creategroup-with-long-format.html">Creating ParticipantGroup objects</a>. Here, it’s assumed that the raw data are in ‘long format’, as briefly shown below:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">synr_exampledf_long_small</span><span class="op">)</span>
<span class="co">#&gt;   participant_id trial_symbol response_color response_time</span>
<span class="co">#&gt; 1              1            A         23F0BE           1.2</span>
<span class="co">#&gt; 2              1            7         99EECC           3.7</span>
<span class="co">#&gt; 3              1            D         001100           2.5</span>
<span class="co">#&gt; 4              1            D         9788DD           1.7</span>
<span class="co">#&gt; 5              1            A         1348CA           0.9</span>
<span class="co">#&gt; 6              1            7         173EF3           2.0</span></code></pre></div>
<p>Since the data are in ‘long format’, they can be used with <code>create_participantgroup</code> like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_participantgroup.html">create_participantgroup</a></span><span class="op">(</span>
  raw_df<span class="op">=</span><span class="va">synr_exampledf_long_small</span>,
  n_trials_per_grapheme<span class="op">=</span><span class="fl">2</span>,
  id_col_name<span class="op">=</span><span class="st">"participant_id"</span>,
  symbol_col_name<span class="op">=</span><span class="st">"trial_symbol"</span>,
  color_col_name<span class="op">=</span><span class="st">"response_color"</span>,
  time_col_name<span class="op">=</span><span class="st">"response_time"</span>,
  color_space_spec<span class="op">=</span><span class="st">"Luv"</span>
<span class="op">)</span></code></pre></div>
<p>Once you have a ParticipantGroup object (simply called ‘participantgroup’ from here on), you can start using methods with it and accessing its attributes. synr implements this with <a href="http://adv-r.had.co.nz/OO-essentials.html#rc">reference classes</a>, which is an advanced topic. The idea however is that you can learn through synr’s articles and help documentation how to use the tools without having to worry about how they work under the hood.</p>
</div>
<div id="accessing-participantgroup-data" class="section level3">
<h3 class="hasAnchor">
<a href="#accessing-participantgroup-data" class="anchor"></a>Accessing participantgroup data</h3>
<p>The participantgroup has a nested structure, where the <strong>participantgroup</strong> has a list of <strong>participants</strong>, and each participant has a list of <strong>graphemes</strong>. By using <code>$</code> as a separator, you can specify a participant and/or a grapheme to drill down into this nested structure and access data or methods you need.</p>
<p>Let’s start by accessing participants’ data. Say you want to find what colors the participant with ID ‘3’ used for the symbol ‘A’. You can do this by using the syntax <code>&lt;participantgroup&gt;$participants[['&lt;ID&gt;']]$graphemes[[&lt;symbol&gt;]]</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fetched_grapheme_data</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="va">participants</span><span class="op">[[</span><span class="st">'3'</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">graphemes</span><span class="op">[[</span><span class="st">'A'</span><span class="op">]</span><span class="op">]</span>
<span class="va">fetched_grapheme_data</span>
<span class="co">#&gt; Reference class object of class "Grapheme"</span>
<span class="co">#&gt; Field "symbol":</span>
<span class="co">#&gt; [1] "A"</span>
<span class="co">#&gt; Field "response_colors":</span>
<span class="co">#&gt;          [,1]       [,2]      [,3]</span>
<span class="co">#&gt; [1,] 64.41700 -25.894798   66.0961</span>
<span class="co">#&gt; [2,] 33.73906  -2.818399 -123.0723</span>
<span class="co">#&gt; Field "response_times":</span>
<span class="co">#&gt; [1] 9.9 8.1</span>
<span class="co">#&gt; Field "color_space":</span>
<span class="co">#&gt; [1] "Luv"</span></code></pre></div>
<p>The response colors are represented by an nx3 matrix, where n is the number of trials per grapheme (2 in this example). Each row corresponds to one response. The three columns correspond to the dimensions of the used color space, in this case ‘L’, ‘u’ and ‘v’ (because of the specification <code>color_space_spec = "Luv"</code> when creating the participantgroup).</p>
<p>You can access participants by either their row number in the raw data frame, or by their participant ID. In the example, these happen to be the same except that one is of type numeric and the other of type character (the participant on row number 3 of the raw data frame has the ID ‘3’), so both <code>pg$participants[['3']]$graphemes[['A']]</code> and <code>pg$participants[[3]]$graphemes[['A']]</code> work. If instead the third participant had the ID ‘jane’, you could use either <code>pg$participants[['jane']]$graphemes[['A']]</code> or <code>pg$participants[[3]]$graphemes[['A']]</code>.</p>
</div>
</div>
<div id="summarizing-data" class="section level2">
<h2 class="hasAnchor">
<a href="#summarizing-data" class="anchor"></a>Summarizing data</h2>
<p>A method is a function that is linked to a particular R object, and synr relies heavily on methods. The syntax for using methods is <code>&lt;object&gt;$&lt;method_name&gt;()</code>. The examples below illustrate this.</p>
<div id="consistency-scores" class="section level3">
<h3 class="hasAnchor">
<a href="#consistency-scores" class="anchor"></a>Consistency scores</h3>
<div id="grapheme-level-get_consistency_score" class="section level4">
<h4 class="hasAnchor">
<a href="#grapheme-level-get_consistency_score" class="anchor"></a>grapheme level: <code>get_consistency_score</code>
</h4>
<p>You can calculate the consistency score of a single grapheme by:</p>
<ol style="list-style-type: decimal">
<li>Specifying what participant you want from the participantgroup.</li>
<li>Specifying what grapheme you want from the participant’s list of graphemes.</li>
<li>Using the grapheme’s method <code>get_consistency_score</code>.</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># fetching the consistency score of the second participant's grapheme 'A'</span>
<span class="va">cscore_p2_A</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="va">participants</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">graphemes</span><span class="op">[[</span><span class="st">'A'</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">get_consistency_score</span><span class="op">(</span><span class="op">)</span>
<span class="va">cscore_p2_A</span>
<span class="co">#&gt; [1] 76.40256</span></code></pre></div>
<p>There are many more grapheme-level methods, but you usually only need the corresponding participant- and participantgroup-level methods. For this reason, no more examples of grapheme-level methods are provided in this tutorial; you can instead read the help documentation if you want (run <code><a href="../reference/Grapheme-class.html">help(Grapheme)</a></code>).</p>
</div>
<div id="participant-level-get_mean_consistency_score" class="section level4">
<h4 class="hasAnchor">
<a href="#participant-level-get_mean_consistency_score" class="anchor"></a>participant level: <code>get_mean_consistency_score</code>
</h4>
<p>You can calculate an individual participant’s mean consistency score by:</p>
<ol style="list-style-type: decimal">
<li>Specifying what participant you want from the participantgroup.</li>
<li>Calling the participant’s method <code>get_mean_consistency_score</code>:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mean_cscore_p1</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="va">participants</span><span class="op">[[</span><span class="st">'1'</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">get_mean_consistency_score</span><span class="op">(</span><span class="op">)</span>
<span class="va">mean_cscore_p1</span>
<span class="co">#&gt; [1] 131.206</span></code></pre></div>
<p><br></p>
</div>
<div id="participantgroup-level-get_mean_consistency_scores" class="section level4">
<h4 class="hasAnchor">
<a href="#participantgroup-level-get_mean_consistency_scores" class="anchor"></a>participantgroup level: <code>get_mean_consistency_scores</code>
</h4>
<p>The participantgroup method <code>get_mean_consistency_scores</code> calculates the mean consistency scores for all participants, producing a numeric vector with the consistency scores:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mean_cscores</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="fu">get_mean_consistency_scores</span><span class="op">(</span><span class="op">)</span>
<span class="va">mean_cscores</span>
<span class="co">#&gt; [1] 131.2060 101.3738 151.9597</span></code></pre></div>
<p>The order of the mean consistency scores is based on the order of participants in the original raw data frame.</p>
<p>To form a data frame that shows which participant goes with which participant score, the participantgroup method <code>get_ids</code> comes in handy:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mean_cscores</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="fu">get_mean_consistency_scores</span><span class="op">(</span><span class="op">)</span>
<span class="va">p_ids</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="fu">get_ids</span><span class="op">(</span><span class="op">)</span>
<span class="va">mean_scores_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>participant_id<span class="op">=</span><span class="va">p_ids</span>, mean_consistency_score<span class="op">=</span><span class="va">mean_cscores</span><span class="op">)</span>
<span class="va">mean_scores_df</span>
<span class="co">#&gt;   participant_id mean_consistency_score</span>
<span class="co">#&gt; 1              1               131.2060</span>
<span class="co">#&gt; 2              2               101.3738</span>
<span class="co">#&gt; 3              3               151.9597</span></code></pre></div>
</div>
</div>
<div id="number-of-valid-responses" class="section level3">
<h3 class="hasAnchor">
<a href="#number-of-valid-responses" class="anchor"></a>Number of valid responses</h3>
<p>It often helps to see how many valid color responses participants have provided during the experiment. It’s common for consistency tests to provide some kind of ‘no color’ response. This is usually provided mainly as a tool for people who <strong>do</strong> have synesthetic associations to use for non-inducing stimuli, but might be ‘abused’ by people with no synesthetic associations. A mean consistency score is meaningless if a participant has for instance responded with ‘no color’ for all but two graphemes’ responsese, since it’s simple to memorize colors for two symbols.</p>
<p>Note that for synr to work, ‘no color’ responses must be coded as <code>NA</code> values. For more information about this, please see the article <a href="synr-creategroup-with-long-format.html">Creating ParticipantGroup objects</a>.</p>
<div id="participant-level-get_number_all_colored_graphemes" class="section level4">
<h4 class="hasAnchor">
<a href="#participant-level-get_number_all_colored_graphemes" class="anchor"></a>participant level: <code>get_number_all_colored_graphemes</code>
</h4>
<p>This method returns the number of graphemes that <strong>only</strong> have non-NA color responses. Thus, if data are from a consistency test with 3 trials/grapheme, the number of graphemes with 3 non-NA responses is returned.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">num_onlynonna_p2</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="va">participants</span><span class="op">[[</span><span class="st">'2'</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">get_number_all_colored_graphemes</span><span class="op">(</span><span class="op">)</span>
<span class="va">num_onlynonna_p2</span>
<span class="co">#&gt; [1] 3</span></code></pre></div>
<p>So, the second participant gave only valid (non-NA) color responses for 3 graphemes.</p>
<p>The rest of the tutorial will focus on participantgroup-level methods. You can find more info about participant-level methods by running <code><a href="../reference/Participant-class.html">help(Participant)</a></code>.</p>
</div>
<div id="participantgroup-level-get_numbers_all_colored_graphemess" class="section level4">
<h4 class="hasAnchor">
<a href="#participantgroup-level-get_numbers_all_colored_graphemess" class="anchor"></a>participantgroup level: <code>get_numbers_all_colored_graphemess</code>
</h4>
<p>The participantgroup method <code>get_numbers_all_colored_graphemes</code> produces a numeric vector that holds each participant’s number of valid color responses:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">num_onlynonna</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="fu">get_numbers_all_colored_graphemes</span><span class="op">(</span><span class="op">)</span>
<span class="va">num_onlynonna</span>
<span class="co">#&gt; [1] 3 3 3</span></code></pre></div>
<p>All three participants gave only valid (non-NA) color responses for 3 graphemes. The values are in the same order that participants were in in the raw data frame, meaning that the first value corresponds to the first participant, and so on.</p>
<p>Of course, you can combine these values with participant ID’s just like we did above with mean consistency scores:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mean_cscores</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="fu">get_mean_consistency_scores</span><span class="op">(</span><span class="op">)</span>
<span class="va">num_onlynonna</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="fu">get_numbers_all_colored_graphemes</span><span class="op">(</span><span class="op">)</span>
<span class="va">p_ids</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="fu">get_ids</span><span class="op">(</span><span class="op">)</span>
<span class="va">ctest_summary_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  participant_id<span class="op">=</span><span class="va">p_ids</span>, 
  mean_consistency_score<span class="op">=</span><span class="va">mean_cscores</span>,
  num_valid_graphemes<span class="op">=</span><span class="va">num_onlynonna</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ctest_summary_df</span><span class="op">)</span>
<span class="co">#&gt;   participant_id mean_consistency_score num_valid_graphemes</span>
<span class="co">#&gt; 1              1               131.2060                   3</span>
<span class="co">#&gt; 2              2               101.3738                   3</span>
<span class="co">#&gt; 3              3               151.9597                   3</span></code></pre></div>
</div>
</div>
<div id="validating-participant-data" class="section level3">
<h3 class="hasAnchor">
<a href="#validating-participant-data" class="anchor"></a>Validating participant data</h3>
<p>synr includes a unique procedure for validating participant data based on estimating how varied participants’ color responses are. Detailed information is available in the <a href="validate-data.html">validation-focused article</a>. A very rough example and explanation follows.</p>
<div id="participantgroup-level-check_valid_get_twcv_scores" class="section level4">
<h4 class="hasAnchor">
<a href="#participantgroup-level-check_valid_get_twcv_scores" class="anchor"></a>participantgroup level: <code>check_valid_get_twcv_scores</code>
</h4>
<p>The larger example data frame <code>synr_exampledf_large</code> (with 3 trials per grapheme) is used in this example:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pg_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_participantgroup.html">create_participantgroup</a></span><span class="op">(</span>
  raw_df<span class="op">=</span><span class="va">synr_exampledf_large</span>,
  n_trials_per_grapheme<span class="op">=</span><span class="fl">3</span>,
  id_col_name<span class="op">=</span><span class="st">"participant_id"</span>,
  symbol_col_name<span class="op">=</span><span class="st">"trial_symbol"</span>,
  color_col_name<span class="op">=</span><span class="st">"response_color"</span>,
  color_space_spec<span class="op">=</span><span class="st">"Luv"</span>
<span class="op">)</span>

<span class="co"># see separate article for explanation of why 'set.seed' is called</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> 

<span class="co"># call validation method</span>
<span class="va">val_df</span> <span class="op">&lt;-</span> <span class="va">pg_large</span><span class="op">$</span><span class="fu">check_valid_get_twcv_scores</span><span class="op">(</span>
  min_complete_graphemes <span class="op">=</span> <span class="fl">5</span>,
  dbscan_eps <span class="op">=</span> <span class="fl">20</span>,
  dbscan_min_pts <span class="op">=</span> <span class="fl">4</span>,
  max_var_tight_cluster <span class="op">=</span> <span class="fl">150</span>,
  max_prop_single_tight_cluster <span class="op">=</span> <span class="fl">0.6</span>,
  safe_num_clusters <span class="op">=</span> <span class="fl">3</span>,
  safe_twcv <span class="op">=</span> <span class="fl">250</span>,
  complete_graphemes_only <span class="op">=</span> <span class="cn">TRUE</span>,
  symbol_filter <span class="op">=</span> <span class="va">LETTERS</span>
<span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">val_df</span><span class="op">)</span>
<span class="co">#&gt;   valid        reason_invalid      twcv num_clusters</span>
<span class="co">#&gt; 1  TRUE                       1077.9557            8</span>
<span class="co">#&gt; 2 FALSE hi_prop_tight_cluster  195.1215            2</span>
<span class="co">#&gt; 3  TRUE                       1222.0226            5</span>
<span class="co">#&gt; 4  TRUE                       1568.6686            5</span>
<span class="co">#&gt; 5  TRUE                       3154.0720            4</span></code></pre></div>
<p>In the example, we basically ask synr to check for each participant if they have, <em>looking at letters only</em>:</p>
<ul>
<li>used at least 3 clearly discernible colors (e. g. ‘red’, ‘yellow’ and ‘blue’) or otherwise greatly varied their responses (e. g. used very different shades of ‘red’/‘red-orange’ and ‘yellow’/‘yellow-green’)</li>
<li>given all non-NA color responses for at least 4 letters</li>
<li>not answered with roughly the same color (say, ‘black’) for more than 60% of the trials</li>
</ul>
<p>This method, unlike other ones we’ve seen, returns a data frame. Looking at it, we can see that all data sets except the second one were classified as valid. The second data set was classified as invalid due to ‘hi_prop_tight_cluster’, which means that the participant responded with roughly the same color for more than 60% of all letter trials. The ‘twcv’ column gives a summary statistic which roughly describes how much variation there was in the participant’s data. The ‘num_clusters’ column gives an estimate of about how many clearly discernible colors that the participant repeatedly used.</p>
<p>There are various ways to combine the returned data frame with participant ID’s, here’s one using the R built-in <code>cbind</code> function:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">val_id_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span>
  participant_id<span class="op">=</span><span class="va">pg_large</span><span class="op">$</span><span class="fu">get_ids</span><span class="op">(</span><span class="op">)</span>,
  <span class="va">val_df</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">val_id_df</span><span class="op">)</span>
<span class="co">#&gt;   participant_id valid        reason_invalid      twcv num_clusters</span>
<span class="co">#&gt; 1          partA  TRUE                       1077.9557            8</span>
<span class="co">#&gt; 2          partB FALSE hi_prop_tight_cluster  195.1215            2</span>
<span class="co">#&gt; 3          partC  TRUE                       1222.0226            5</span>
<span class="co">#&gt; 4          partD  TRUE                       1568.6686            5</span>
<span class="co">#&gt; 5          partE  TRUE                       3154.0720            4</span></code></pre></div>
<p>Again, please see the <a href="validate-data.html">validation-focused article</a> for more information.</p>
</div>
</div>
</div>
<div id="filtering-data" class="section level2">
<h2 class="hasAnchor">
<a href="#filtering-data" class="anchor"></a>Filtering data</h2>
<p>Participants who have synesthetic associations might only have those for some of the graphemes used in a test. For instance, a participant might only have synesthetic associations for digits, but not letters, even though both categories are included in the test. synr helps you apply filters to calculate summary statistics for only a subset of graphemes. Filters are applied by passing a character vector of symbols/graphemes to the <code>symbol_filter=</code> argument, when using participant-level or participantgroup-level methods for summary statistics.</p>
<div id="participantgroup-level-filtering" class="section level3">
<h3 class="hasAnchor">
<a href="#participantgroup-level-filtering" class="anchor"></a>participantgroup level filtering</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">weekdays_filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
  <span class="st">'Monday'</span>, <span class="st">'Tuesday'</span>, <span class="st">'Wednesday'</span>, <span class="st">'Thursday'</span>,
  <span class="st">'Friday'</span>, <span class="st">'Saturday'</span>, <span class="st">'Sunday'</span>
<span class="op">)</span>
<span class="co"># note that the 'large' example data (rolled up in 'pg_large')</span>
<span class="co"># are used again here</span>
<span class="va">cscores_weekdays</span> <span class="op">&lt;-</span> <span class="va">pg_large</span><span class="op">$</span><span class="fu">get_mean_consistency_scores</span><span class="op">(</span>symbol_filter<span class="op">=</span><span class="va">weekdays_filter</span><span class="op">)</span>
<span class="va">cscores_weekdays</span>
<span class="co">#&gt; [1] 256.61146  79.72227  63.34418 256.80966  32.72955</span></code></pre></div>
<p>The produced vector holds each participant’s (there are 5 participants in this case) mean consistency score, only taking data from trials that had a weekday grapheme into account.</p>
</div>
</div>
<div id="handling-summary-statistics-efficiently" class="section level2">
<h2 class="hasAnchor">
<a href="#handling-summary-statistics-efficiently" class="anchor"></a>Handling summary statistics efficiently</h2>
<p>If calculating many statistics with synr, putting them into a single data frame becomes unwieldy. It may help to separate different kinds of summary statistics into different data frames. When data (produced by synr or from other sources) need to be combined, data frames can be combined with the R <code>merge</code> function. A simple example follows:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_participantgroup.html">create_participantgroup</a></span><span class="op">(</span>
  raw_df<span class="op">=</span><span class="va">synr_exampledf_large</span>,
  n_trials_per_grapheme<span class="op">=</span><span class="fl">3</span>,
  id_col_name<span class="op">=</span><span class="st">"participant_id"</span>,
  symbol_col_name<span class="op">=</span><span class="st">"trial_symbol"</span>,
  color_col_name<span class="op">=</span><span class="st">"response_color"</span>,
  time_col_name<span class="op">=</span><span class="st">"response_time"</span>,
  color_space_spec<span class="op">=</span><span class="st">"Luv"</span>
<span class="op">)</span>

<span class="co"># form first data frame, with consistency scores</span>
<span class="va">mean_cscores</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="fu">get_mean_consistency_scores</span><span class="op">(</span><span class="op">)</span>
<span class="va">p_ids</span> <span class="op">&lt;-</span> <span class="va">pg</span><span class="op">$</span><span class="fu">get_ids</span><span class="op">(</span><span class="op">)</span>
<span class="va">cons_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  participant_id<span class="op">=</span><span class="va">p_ids</span>, 
  mean_consistency_score<span class="op">=</span><span class="va">mean_cscores</span>
<span class="op">)</span>

<span class="co"># form second data frame, with validation-related information</span>
<span class="va">val_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span>
  participant_id<span class="op">=</span><span class="va">pg</span><span class="op">$</span><span class="fu">get_ids</span><span class="op">(</span><span class="op">)</span>, 
  <span class="va">pg</span><span class="op">$</span><span class="fu">check_valid_get_twcv_scores</span><span class="op">(</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># combine the two data frames, by telling R to 'link them up'</span>
<span class="co"># based on the 'participant_id' column</span>
<span class="va">cons_val_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html">merge</a></span><span class="op">(</span><span class="va">cons_df</span>, <span class="va">val_df</span>, by<span class="op">=</span><span class="st">'participant_id'</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">cons_val_df</span><span class="op">)</span>
<span class="co">#&gt;   participant_id mean_consistency_score valid        reason_invalid     twcv</span>
<span class="co">#&gt; 1          partA              270.62529  TRUE                       3649.047</span>
<span class="co">#&gt; 2          partB               50.55262 FALSE hi_prop_tight_cluster  770.760</span>
<span class="co">#&gt; 3          partC                     NA  TRUE                        531.202</span>
<span class="co">#&gt; 4          partD              271.88148  TRUE                       4806.165</span>
<span class="co">#&gt; 5          partE                     NA  TRUE                       1702.389</span>
<span class="co">#&gt;   num_clusters</span>
<span class="co">#&gt; 1            4</span>
<span class="co">#&gt; 2            4</span>
<span class="co">#&gt; 3            6</span>
<span class="co">#&gt; 4            3</span>
<span class="co">#&gt; 5            5</span></code></pre></div>
<p>They key is to make sure each separate data frame includes the participant ID’s and then set <code>by='participant_id'</code> (or whatever the data frames’ participant ID columns are named).</p>
</div>
<div id="visualizing-participant-data" class="section level2">
<h2 class="hasAnchor">
<a href="#visualizing-participant-data" class="anchor"></a>Visualizing participant data</h2>
<p>It can often be helpful to get an overview of participants’ response colors and each grapheme’s consistency score. synr uses <a href="https://ggplot2.tidyverse.org/">ggplot2</a> to achieve this.</p>
<div id="producing-plots-for-immediate-display" class="section level3">
<h3 class="hasAnchor">
<a href="#producing-plots-for-immediate-display" class="anchor"></a>Producing plots for immediate display</h3>
<div id="participant-level-plotting-get_plot" class="section level4">
<h4 class="hasAnchor">
<a href="#participant-level-plotting-get_plot" class="anchor"></a>participant level plotting: <code>get_plot</code>
</h4>
<p>For details on how the <code>get_plot</code> method works, please have a look at the documentation for the Participant class, by using <code><a href="../reference/Participant-class.html">help(Participant)</a></code>. There, you can scroll down to the description of <code>get_plot</code>, under “Methods”.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pg_large</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_participantgroup.html">create_participantgroup</a></span><span class="op">(</span>
  raw_df<span class="op">=</span><span class="va">synr_exampledf_large</span>,
  n_trials_per_grapheme<span class="op">=</span><span class="fl">3</span>,
  id_col_name<span class="op">=</span><span class="st">"participant_id"</span>,
  symbol_col_name<span class="op">=</span><span class="st">"trial_symbol"</span>,
  color_col_name<span class="op">=</span><span class="st">"response_color"</span>,
  color_space_spec<span class="op">=</span><span class="st">"Luv"</span>
<span class="op">)</span>
<span class="co"># increase grapheme size and angle them slightly to make them easier to see,</span>
<span class="co"># and only include digits and letters (excluding the weekday data in this</span>
<span class="co"># example)</span>
<span class="va">p6_plot</span> <span class="op">&lt;-</span> <span class="va">pg_large</span><span class="op">$</span><span class="va">participants</span><span class="op">[[</span><span class="st">'partA'</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">get_plot</span><span class="op">(</span>
  grapheme_size<span class="op">=</span><span class="fl">2.2</span>, 
  grapheme_angle<span class="op">=</span><span class="fl">30</span>,
  symbol_filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">9</span>, <span class="va">LETTERS</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">p6_plot</span></code></pre></div>
<p><img src="synr-tutorial_files/figure-html/get_plot_demo-1.png" width="768"></p>
<p>On the left side of the plot, you see the graphemes used in the test, colored in the participant’s response colors. The bars represent the consistency score for each grapheme.</p>
</div>
</div>
<div id="producing-plots-and-saving-them-on-your-computer" class="section level3">
<h3 class="hasAnchor">
<a href="#producing-plots-and-saving-them-on-your-computer" class="anchor"></a>Producing plots and saving them on your computer</h3>
<div id="participant-level-plot-saving-save_plot" class="section level4">
<h4 class="hasAnchor">
<a href="#participant-level-plot-saving-save_plot" class="anchor"></a>participant level plot saving: <code>save_plot</code>
</h4>
<p>For details on how the <code>save_plot</code> method works, have a look again at <code><a href="../reference/Participant-class.html">help(Participant)</a></code>. Scroll down to the description of <code>save_plot</code>, under “Methods”. What is most essential is that you specify the <code>save_dir=</code> argument, which is where you want the plot to be saved (including filename at the end):</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pg_large</span><span class="op">$</span><span class="va">participants</span><span class="op">[[</span><span class="fl">6</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">save_plot</span><span class="op">(</span>
  save_dir<span class="op">=</span><span class="st">'path/to/save/folder/'</span>,
  file_format<span class="op">=</span><span class="st">'png'</span>,
  grapheme_size<span class="op">=</span><span class="fl">2.2</span>, 
  grapheme_angle<span class="op">=</span><span class="fl">30</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="participantgroup-level-plot-saving-save_plots" class="section level4">
<h4 class="hasAnchor">
<a href="#participantgroup-level-plot-saving-save_plots" class="anchor"></a>participantgroup level plot saving: <code>save_plots</code>
</h4>
<p>For details on how the <code>save_plots</code> method works, run <code><a href="../reference/ParticipantGroup-class.html">help(ParticipantGroup)</a></code>. Scroll down to the description of <code>save_plots</code>, under “Methods”. What is most essential is again that you specify the <code>save_dir=</code> argument, which is the directory you want the plots to be saved to, and the <code>file_format=</code> argument:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pg_large</span><span class="op">$</span><span class="fu">save_plots</span><span class="op">(</span>
  save_dir<span class="op">=</span><span class="st">'path/to/save/folder'</span>,
  file_format<span class="op">=</span><span class="st">'png'</span>,
  grapheme_size<span class="op">=</span><span class="fl">2.2</span>, 
  grapheme_angle<span class="op">=</span><span class="fl">30</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
</div>
<div id="next-steps" class="section level2">
<h2 class="hasAnchor">
<a href="#next-steps" class="anchor"></a>Next steps</h2>
<p>There are additional articles which explain synr, including some mentioned throughout this article. To better understand how synr is used in practice, you might want to read <a href="dingemanse-data-example.html">Using synr with real data: Coloured vowels</a>.</p>
<p>There is more detailed and technical information about synr that you can find in the help documentation, as mentioned throughout this article.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Lowe Wilsson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
